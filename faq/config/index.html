<!doctype html><html><head><title>配置和运行时的问题 :: Project X</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=revised content="2021-02-09T14:04:28 UTC"><meta name=description content="Project X 的文档."><meta name=author content="Project X"><title>配置和运行时的问题 :: Project X</title><link rel="shortcut icon" href=/images/favicon.png type=image/x-icon><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/css/bootstrap.min.css integrity=sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.css><script src=https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js></script><link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel=stylesheet><link rel=stylesheet type=text/css href=https://xtls.github.io/sass/layout.css><link rel=stylesheet type=text/css href=https://xtls.github.io/css/style.main.css><link rel=stylesheet type=text/css href=https://xtls.github.io/css/style.menu.css><link rel=stylesheet type=text/css href=https://xtls.github.io/sass/shortcodes/notice.css><link rel=stylesheet type=text/css href=https://xtls.github.io/sass/shortcodes/tabs.css><link rel=stylesheet type=text/css href=https://xtls.github.io/sass/shortcodes/panel.css><link rel=stylesheet type=text/css href=https://xtls.github.io/sass/shortcodes/columns.css><link rel=stylesheet type=text/css href=https://xtls.github.io/sass/shortcodes/children.css><link rel=stylesheet type=text/css href=https://xtls.github.io/sass/shortcodes/attachments.css><link rel=stylesheet type=text/css href=https://xtls.github.io/sass/shortcodes/alert.css><link rel=stylesheet type=text/css href=/css/docport.css><script src=/js/docport.js></script><script type=text/javascript>var baseurl="https:\/\/xtls.github.io";</script><link rel=stylesheet href=/css/custom.css></head><body data-url=/faq/config/><style type=text/css>#debug{display:-webkit-box;display:-ms-flexbox;display:flex;line-height:3.5rem;margin-bottom:.35rem;padding:0 2rem;position:fixed;left:0;right:0;top:0;top:0;min-height:150px;background-color:#fff;border:3px solid red;z-index:10000;word-wrap:all;overflow:auto}</style><header><div><div class=burger><a href=javascript:void(0); style=font-size:15px onclick="$('article > aside').toggleClass('responsive')">&#9776;</a></div><div><a class=baselink href=https://xtls.github.io>Project X</a></div><nav class=shortcuts><li role><a href=/about/new rel=noopener>What's New</a></li><li role><a href=https://github.com/XTLS rel=noopener>GitHub</a></li><li role><a href=https://github.com/XTLS/Xray-core/releases rel=noopener>Download</a></li><li role><a href=https://xtls.github.io/ rel=noopener>Documentation</a></li></nav></div></header><article><aside><div class=search><div class=searchbox><input data-search-input id=search-by type=text placeholder></div><script type=text/javascript src=/vendor/lunr/lunr.min.js></script><script type=text/javascript src=/vendor/auto-complete/auto-complete.js></script><link href=/vendor/auto-complete/auto-complete.css rel=stylesheet><script type=text/javascript>var baseurl="https:\/\/xtls.github.io";</script><script type=text/javascript src=/js/search.js></script></div><center><a class=github-button href=https://github.com/XTLS/Xray-core/releases data-icon=octicon-cloud-download aria-label="Download vjeantet/hugo-theme-docport on GitHub">Download</a>
<a class=github-button href=https://github.com/XTLS/Xray-core data-icon=octicon-star data-show-count=false aria-label="Star vjeantet/hugo-theme-docport on GitHub">Star</a>
<a class=github-button href=https://github.com/XTLS/Xray-core/fork data-icon=octicon-repo-forked data-show-count=true aria-label="Fork vjeantet/hugo-theme-docport on GitHub">Fork</a></center>
<script async defer src=https://buttons.github.io/buttons.js></script><div id=close_menu><a href=javascript:void(0); style=font-size:15px onclick="$('article > aside').toggleClass('responsive')"><i class="fa fa-lg fa-times"></i></a></div><ul class=menu><hr><li data-nav-id=https://xtls.github.io/about/ class="dd-item haschildren
item_level_$level"><i class="fas fa-chevron-right ddexp"></i><a href=/about/>Project X&nbsp;⚡</a><ul><li data-nav-id=https://xtls.github.io/about/new/ class="dd-item
item_level_$level"><a href=/about/new/>大史记&nbsp;</a></li></ul></li><hr><li data-nav-id=https://xtls.github.io/guide/ class="dd-item alwaysopen
item_level_$level"><a href=/guide/>快速入门&nbsp;</a></li><li data-nav-id=https://xtls.github.io/config/ class="dd-item haschildren
item_level_$level"><i class="fas fa-chevron-right ddexp"></i><a href=/config/>配置文件&nbsp;📜</a><ul><li data-nav-id=https://xtls.github.io/config/base/ class="dd-item haschildren
item_level_$level"><a href=/config/base/>基础配置模块&nbsp;</a>
<i class="fas fa-chevron-right ddexp"></i><ul><li data-nav-id=https://xtls.github.io/config/base/log/ class="dd-item
item_level_$level"><a href=/config/base/log/>日志配置</a></li><li data-nav-id=https://xtls.github.io/config/base/api/ class="dd-item
item_level_$level"><a href=/config/base/api/>API接口</a></li><li data-nav-id=https://xtls.github.io/config/base/dns/ class="dd-item
item_level_$level"><a href=/config/base/dns/>内置DNS服务器</a></li><li data-nav-id=https://xtls.github.io/config/base/routing/ class="dd-item
item_level_$level"><a href=/config/base/routing/>路由</a></li><li data-nav-id=https://xtls.github.io/config/base/policy/ class="dd-item
item_level_$level"><a href=/config/base/policy/>本地策略</a></li><li data-nav-id=https://xtls.github.io/config/base/inbounds/ class="dd-item
item_level_$level"><a href=/config/base/inbounds/>Inbounds</a></li><li data-nav-id=https://xtls.github.io/config/base/outbounds/ class="dd-item
item_level_$level"><a href=/config/base/outbounds/>Outbounds</a></li><li data-nav-id=https://xtls.github.io/config/base/transport/ class="dd-item
item_level_$level"><a href=/config/base/transport/>传输方式</a></li><li data-nav-id=https://xtls.github.io/config/base/stats/ class="dd-item
item_level_$level"><a href=/config/base/stats/>统计信息</a></li><li data-nav-id=https://xtls.github.io/config/base/reverse/ class="dd-item
item_level_$level"><a href=/config/base/reverse/>反向代理</a></li></ul></li><li data-nav-id=https://xtls.github.io/config/inbound-protocols/ class="dd-item
item_level_$level"><a href=/config/inbound-protocols/>Inbounds 可用协议列表</a></li><li data-nav-id=https://xtls.github.io/config/outbound-protocols/ class="dd-item
item_level_$level"><a href=/config/outbound-protocols/>Outbounds 可用协议列表</a></li><li data-nav-id=https://xtls.github.io/config/transports/ class="dd-item
item_level_$level"><a href=/config/transports/>传输方式列表</a></li><li data-nav-id=https://xtls.github.io/config/vless/ class="dd-item
item_level_$level"><a href=/config/vless/>VLESS 协议详解</a></li><li data-nav-id=https://xtls.github.io/config/fallback/ class="dd-item
item_level_$level"><a href=/config/fallback/>Fallbacks</a></li><li data-nav-id=https://xtls.github.io/config/xtls/ class="dd-item
item_level_$level"><a href=/config/xtls/>XTLS 深度剖析</a></li><li data-nav-id=https://xtls.github.io/config/env/ class="dd-item
item_level_$level"><a href=/config/env/>环境变量</a></li><li data-nav-id=https://xtls.github.io/config/multiple_config/ class="dd-item alwaysopen
item_level_$level"><a href=/config/multiple_config/>多文件配置</a></li></ul></li><li data-nav-id=https://xtls.github.io/documents/ class="dd-item haschildren
item_level_$level"><i class="fas fa-chevron-right ddexp"></i><a href=/documents/>使用心得&nbsp;📚</a><ul><li data-nav-id=https://xtls.github.io/documents/level-0/ class="dd-item alwaysopen
item_level_$level"><a href=/documents/level-0/>小小白白话文&nbsp;📙</a></li><li data-nav-id=https://xtls.github.io/documents/level-1/ class="dd-item alwaysopen
item_level_$level"><a href=/documents/level-1/>入门技巧&nbsp;📚</a></li><li data-nav-id=https://xtls.github.io/documents/level-2/ class="dd-item alwaysopen
item_level_$level"><a href=/documents/level-2/>进阶文档&nbsp;📘</a></li></ul></li><li data-nav-id=https://xtls.github.io/develop/ class="dd-item haschildren
item_level_$level"><i class="fas fa-chevron-right ddexp"></i><a href=/develop/>开发指南&nbsp;🖥️</a><ul><li data-nav-id=https://xtls.github.io/develop/intro/ class="dd-item alwaysopen
item_level_$level"><a href=/develop/intro/>开发手册</a></li><li data-nav-id=https://xtls.github.io/develop/protocols/ class="dd-item alwaysopen
item_level_$level"><a href=/develop/protocols/>协议详解</a></li></ul></li><li data-nav-id=https://xtls.github.io/faq/ class="dd-item parent active alwaysopen
item_level_$level"><a href=/faq/>常见问答&nbsp;💬</a></li><li data-nav-id=https://xtls.github.io/caseslip/ class="dd-item alwaysopen
item_level_$level"><a href=/caseslip/>大案牍术&nbsp;</a></li><hr><li data-nav-id=https://xtls.github.io/links/ class="dd-item alwaysopen
item_level_$level"><a href=/links/>常用链接&nbsp;🤝</a></li></ul></aside><section class=page><nav id=ariane aria-label=breadcrumb><ol class=ariane><li><a class=text-link href=https://xtls.github.io></a></li><li><a class=text-link href=/faq/>常见问答</a></li><li class=active>配置和运行时的问题</li></ol></nav><h1>常见问答<span>配置和运行时的问题</span></h1><nav class=subpages><li><a title=$pagetitle href=/faq/start/>下载和安装中的问题</a></li><li class=active><a title=$pagetitle href=/faq/config/>配置和运行时的问题</a></li><li><a title=$pagetitle href=/faq/performance/>性能相关的问题</a></li><li><a title=$pagetitle href=/faq/tproxy/>透明代理相关问题</a></li><li><a title=$pagetitle href=/faq/fallback/>回落相关问题</a></li><li><a title=$pagetitle href=/faq/xtls/>XTLS相关问题</a></li><li><a title=$pagetitle href=/faq/about/>关于Xray</a></li></nav><div class=jump-to-section><span onclick="$h=$(this);$h.next('nav').slideToggle(100,function(){$h.children('i').attr('class',function(){return $h.next('nav').is(':visible')?'fas fa-chevron-down':'fas fa-chevron-right';});});"><span class="fas fa-align-right"></span><i class="fas fa-chevron-right"></i></span><nav id=TableOfContents></nav></div><div class=content><div class=card><div class="card-header warning"><strong>Q: 为什么windows下只有一个可执行程序? 我想要隐藏执行, 嘤嘤嘤.</strong></div><div class=card-body><p class=card-text><p>A1:<br>方式很多,如:
建立一个hiderun.vbs文件,放在xray.exe同一目录
编辑内容为</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback>CreateObject(&#34;WScript.Shell&#34;).Run &#34;xray.exe&#34;,0
</code></pre></div><p>运行此vbs即可, 然后放个快捷方式到shell:startup里面，就可以开机启动了</p><hr><p>A2:<br>也可以通过创建window服务/计划任务等方式实现,亦可借助一些专门的后台运行的工具(不太必要)</p><hr><p>A3:<br><a href=http://www.commandline.co.uk/chp/>CHP</a> (Create Hidden Process)</p><hr><p>A4:<br>用<a href=https://github.com/winsw/winsw>winsw</a>可以将xray-core添加为Win的系统服务，开机自动运行，不需要手动隐藏窗口。</p><hr><p>A5:<br>写一个bat开机启动<br></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback>@echo off
if &#34;%1&#34; == &#34;h&#34; goto begin
mshta vbscript:createobject(&#34;wscript.shell&#34;).run(&#34;%~nx0 h&#34;,0)(window.close)&amp;&amp;exit
:begin

D:/Xray run -c D:/Xray.json `
</code></pre></div></p></div></div><p><br></p><div class=card><div class="card-header warning"><strong>Q: 无法用做Tor前置代理 <a href=https://github.com/XTLS/Xray-core/issues/66>#66</a></strong></div><div class=card-body><p class=card-text><p>关闭 sniffing 再试试.</p></p></div></div><p><br></p><div class=card><div class="card-header warning"><strong>Q: 如何自定义.dat文件的文件位置?</strong></div><div class=card-body><p class=card-text><p>设置环境变量 XRAY_LOCATION_ASSET 的值</p></p></div></div><p><br></p><div class=card><div class="card-header warning"><strong>Q: 为什么我配置了SSL证书但不可用?</strong></div><div class=card-body><p class=card-text><ul><li>检查证书权限</li><li>使用 fullchain 证书</li></ul></p></div></div><p><br></p><div class=card><div class="card-header warning"><strong>Q: 我以前用gfw列表, 我现在用Xray怎么进行分流呢?</strong></div><div class=card-body><p class=card-text><p>使用geo*.dat, 并且合理配置路由规则.</p></p></div></div><p><br></p><div class=card><div class="card-header warning"><strong>Q: 我还是上一题的提问者, 那么我如何使用dat数据文件和配置路由规则达到国内走直连,其他走代理的目的呢?</strong></div><div class=card-body><p class=card-text><p><del>等待好心人写一篇小小白白话文</del></p></p></div></div><p><br></p><div class=card><div class="card-header warning"><strong>Q: 如何配置才能在myssl或者ssllibs得到双A+的评价？</strong></div><div class=card-body><p class=card-text><p>首先，这不是必需的，即便没有双A+，甚至只有B，也并不意味着不安全。</p><p>你现在可以这样做:</p><ol><li>前提, 你的证书是ECC证书, 比如你用acme.sh可以这样获取</li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback>./acme.sh --issue -d &#34;your.domain&#34; -w /var/www/html -k ec-256 --cert-file /etc/xray/&#34;your.domain&#34;/&#34;your.domain&#34;.cer --key-file /etc/xray/&#34;your.domain&#34;/&#34;your.domain&#34;.key --fullchain-file /etc/xray/&#34;your.domain&#34;/fullchain.cer --force

</code></pre></div><p><br></p><ol start=2><li>只需简单的在 <strong>服务端的</strong> TLS 配置 (streamsettings中的tlsSettings/xtlsSettings) 中加入</li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback>&#34;minVersion&#34;: &#34;1.2&#34;
</code></pre></div><p><strong>即可在myssl或ssllabs上获得A</strong></p><p><br></p><ol start=3><li>然后在回落的网站服务器上开启HSTS,如 Nginx 只需配置</li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback>add_header Strict-Transport-Security &#34;max-age=63072000&#34; always;
</code></pre></div><p><strong>即可在myssl或ssllabs上获得A+</strong></p></p></div></div><p><br></p><div class=card><div class="card-header warning"><strong>Q: 什么是UDP fullcone?</strong></div><div class=card-body><p class=card-text><p>fullcone的核心改变在于对游戏性能、使用到UDP的语音视频性能的优化。</p><p>很多游戏会测试网络类型，类型过低甚至不能联机。fullcone一般都可以达到最佳类型。</p></p></div></div><p><br></p><div class=card><div class="card-header warning"><strong>Q: 实现Full Cone NAT时,设置了iptables后降低了NAT等级怎么办?</strong></div><div class=card-body><p class=card-text><p>请参见<a href=https://github.com/XTLS/Xray-core/issues/161>这个issue里提出的方式</a></p></p></div></div><p><br></p><div class=card><div class="card-header warning"><strong>Q: 打开证书的时候提示没有权限?</strong></div><div class=card-body><p class=card-text><ol><li>首先需要给证书文件以读取权限.</li><li>其次要给证书所在目录及上层目录x权限.</li></ol></p></div></div><p><br></p><div class=card><div class="card-header warning"><strong>Q: log 里面有大量报 warning 的信息, 好可怕!</strong></div><div class=card-body><p class=card-text><p>连接异常断开是常有的现象, 如果能正常使用, 不必惊慌, 如果不能正常使用, 拿好你的配置文件和log, 去开一个issue.</p></p></div></div><p><br></p></div><div class=chevrons></div></section><section class=right-menu><div class=TableOfContents><label><i class="fas fa-align-right"></i>&nbsp;&nbsp;</label><nav><ul><li><a href=/faq/config/>配置和运行时的问题</a></li></ul></nav><nav id=TableOfContents></nav></div><div class=Actions><nav><ul><li><a href=https://github.com/XTLS/XTLS.github.io/tree/main/content/FAQ/config.md target=blank><i class="fab fa-github"></i></a></li><li><i class="fas fa-calendar"></i>23 December 2020</li></ul></nav></div></section></article><footer><footer><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank rel="noopener noreferrer" href=https://example.org/mail><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel="noopener noreferrer" href=https://example.org/twitter><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel="noopener noreferrer" href=https://example.org/stack><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/XTLS><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel="noopener noreferrer" href=https://example.org/slack><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel="noopener noreferrer" href=https://example.org/mail><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2020-2021 ProjectX Community All Rights Reserved</small></div></div></div></footer></footer></body></html>